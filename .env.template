# ARC Matrix Messenger - Unified Environment Template
# Copy this file to ".env" and fill in your values.
# Notes:
# - This single template replaces ".env.matrix.template". Do not use the old template.
# - Variables marked OPTIONAL have safe defaults. REQUIRED must be set for production.
# - VERBOSE is deprecated; prefer LOG_LEVEL and MATRIX_SDK_LOG_LEVEL.

# =========================
# Core Application (REQUIRED)
# =========================
APP_NAME=arc-matrix-messenger
# Stable app instance identifier (used in message signatures and logs). Keep unique per deployment.
ARC_USER_ID=arc-matrix-messenger-1
# Your Matrix username (used for display/logs and default session prefix). Do NOT include leading "@" here.
ARC_USER=your_username

# =========================
# Messaging & Database (REQUIRED)
# =========================
# RabbitMQ connection string
ARC_MESSAGE_BROKER_URL=amqp://user:password@localhost:5672
# MongoDB connection string INCLUDING database name
ARC_DATABASE_URI=mongodb://user:password@localhost:27017/arc_matrix
# Optional logical DB name (kept for compatibility)
DB_NAME=arc_matrix

# =========================
# Logging (RECOMMENDED)
# =========================
# App CLI logs: silent | error | warn | info | debug
LOG_LEVEL=info
# Matrix SDK logs: silent | error | warn | info | debug
MATRIX_SDK_LOG_LEVEL=error
# Deprecated (legacy). Prefer LOG_LEVEL and MATRIX_SDK_LOG_LEVEL.
# VERBOSE=false

# =========================
# Matrix Authentication (REQUIRED for first login unless using access token)
# =========================
MATRIX_HOMESERVER=https://matrix.org
# Full Matrix user ID, including leading "@" and server
MATRIX_USER_ID=@your_username:matrix.org
# For first login. Omit if providing access token + device ID below.
MATRIX_USER_PASSWORD=your_MATRIX_USER_PASSWORD
# Human-friendly device name shown in Element during verification
MATRIX_CLIENT_DEVICE_NAME=ARC Matrix Messenger

# Optional: if you already have a session
# MATRIX_ACCESS_TOKEN=your_access_token
# MATRIX_DEVICE_ID=your_device_id

# Optional: Provide 32-byte base64 recovery key to allow SSSS import (cross-signing/backup)
# MATRIX_USER_RECOVERY_KEY_B64=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=

# Limit events in initial sync to reduce history load (default 250)
MATRIX_CLIENT_SYNC_LIMIT=250

# =========================
# Phase 2 Flags (OPTIONAL)
# =========================
# Enable Canonical Messenger Event storage in `events` collection (default: false)
CME_ENABLED=false
# Publish reaction ingress events (default: false)
PUBLISH_REACTIONS=false
# Publish receipt ingress events (default: false)
PUBLISH_RECEIPTS=false

# =========================
# Session & Database Collections (OPTIONAL, sensible defaults)
# =========================
# Session identifier used in DB signatures. Defaults to ARC_USER_ID if unset.
# For Matrix deployments, prefer your Matrix user ID here:
WID=@your_username:matrix.org

# Prefix for session/crypto storage in Mongo; defaults to "${ARC_USER}MatrixSession"
# COLLECTION_NAME_PREFIX=${ARC_USER}MatrixSession

# Primary DBs for messages and acks (used when building Mongo signatures)
PRIMARY_DB_MESSAGES=${ARC_USER}_MatrixHistory
PRIMARY_DB_ACKS=${ARC_USER}_MatrixSession

# Mongo auth DB and cluster label for signatures
AUTH_DB=remoteAuth
MONGO_CLUSTER=arc_matrix
